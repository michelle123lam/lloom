!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vega-scale")):"function"==typeof define&&define.amd?define(["exports","vega-scale"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).vega={},n.vega)}(this,(function(n,t){"use strict";class r{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const t=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const e=t[i],o=n+e,u=Math.abs(n)<Math.abs(e)?n-(o-e):e-(o-n);u&&(t[r++]=u),n=o}return t[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let t,r,i,e=this._n,o=0;if(e>0){for(o=n[--e];e>0&&(t=o,r=n[--e],o=t+r,i=r-(o-t),!i););e>0&&(i<0&&n[e-1]<0||i>0&&n[e-1]>0)&&(r=2*i,t=o+r,r==t-o&&(o=t))}return o}}function i(n){return Array.from(function*(n){for(const t of n)yield*t}(n))}var e=1e-6,o=1e-12,u=Math.PI,a=u/2,l=u/4,c=2*u,f=180/u,s=u/180,p=Math.abs,h=Math.atan,v=Math.atan2,g=Math.cos,d=Math.exp,E=Math.log,S=Math.pow,y=Math.sin,m=Math.sign||function(n){return n>0?1:n<0?-1:0},_=Math.sqrt,M=Math.tan;function x(n){return n>1?0:n<-1?u:Math.acos(n)}function w(n){return n>1?a:n<-1?-a:Math.asin(n)}function N(){}function b(n,t){n&&P.hasOwnProperty(n.type)&&P[n.type](n,t)}var $={Feature:function(n,t){b(n.geometry,t)},FeatureCollection:function(n,t){for(var r=n.features,i=-1,e=r.length;++i<e;)b(r[i].geometry,t)}},P={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)n=r[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){j(n.coordinates,t,0)},MultiLineString:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)j(r[i],t,0)},Polygon:function(n,t){z(n.coordinates,t)},MultiPolygon:function(n,t){for(var r=n.coordinates,i=-1,e=r.length;++i<e;)z(r[i],t)},GeometryCollection:function(n,t){for(var r=n.geometries,i=-1,e=r.length;++i<e;)b(r[i],t)}};function j(n,t,r){var i,e=-1,o=n.length-r;for(t.lineStart();++e<o;)i=n[e],t.point(i[0],i[1],i[2]);t.lineEnd()}function z(n,t){var r=-1,i=n.length;for(t.polygonStart();++r<i;)j(n[r],t,1);t.polygonEnd()}function R(n,t){n&&$.hasOwnProperty(n.type)?$[n.type](n,t):b(n,t)}function q(n){return[v(n[1],n[0]),w(n[2])]}function A(n){var t=n[0],r=n[1],i=g(r);return[i*g(t),i*y(t),y(r)]}function T(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function k(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function L(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function C(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function F(n){var t=_(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function H(n,t){function r(r,i){return r=n(r,i),t(r[0],r[1])}return n.invert&&t.invert&&(r.invert=function(r,i){return(r=t.invert(r,i))&&n.invert(r[0],r[1])}),r}function O(n,t){return p(n)>u&&(n-=Math.round(n/c)*c),[n,t]}function W(n,t,r){return(n%=c)?t||r?H(Y(n),I(t,r)):Y(n):t||r?I(t,r):O}function X(n){return function(t,r){return p(t+=n)>u&&(t-=Math.round(t/c)*c),[t,r]}}function Y(n){var t=X(n);return t.invert=X(-n),t}function I(n,t){var r=g(n),i=y(n),e=g(t),o=y(t);function u(n,t){var u=g(t),a=g(n)*u,l=y(n)*u,c=y(t),f=c*r+a*i;return[v(l*e-f*o,a*r-c*i),w(f*e+l*o)]}return u.invert=function(n,t){var u=g(t),a=g(n)*u,l=y(n)*u,c=y(t),f=c*e-l*o;return[v(l*e+c*o,a*r+f*i),w(f*r-a*i)]},u}function G(n,t){(t=A(t))[0]-=n,F(t);var r=x(-t[1]);return((-t[2]<0?-r:r)+c-e)%c}function Z(){var n,t=[];return{point:function(t,r,i){n.push([t,r,i])},lineStart:function(){t.push(n=[])},lineEnd:N,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],n=null,r}}}function B(n,t){return p(n[0]-t[0])<e&&p(n[1]-t[1])<e}function D(n,t,r,i){this.x=n,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function J(n,t,r,i,o){var u,a,l=[],c=[];if(n.forEach((function(n){if(!((t=n.length-1)<=0)){var t,r,i=n[0],a=n[t];if(B(i,a)){if(!i[2]&&!a[2]){for(o.lineStart(),u=0;u<t;++u)o.point((i=n[u])[0],i[1]);return void o.lineEnd()}a[0]+=2*e}l.push(r=new D(i,n,null,!0)),c.push(r.o=new D(i,null,r,!1)),l.push(r=new D(a,n,null,!1)),c.push(r.o=new D(a,null,r,!0))}})),l.length){for(c.sort(t),K(l),K(c),u=0,a=c.length;u<a;++u)c[u].e=r=!r;for(var f,s,p=l[0];;){for(var h=p,v=!0;h.v;)if((h=h.n)===p)return;f=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(v)for(u=0,a=f.length;u<a;++u)o.point((s=f[u])[0],s[1]);else i(h.x,h.n.x,1,o);h=h.n}else{if(v)for(f=h.p.z,u=f.length-1;u>=0;--u)o.point((s=f[u])[0],s[1]);else i(h.x,h.p.x,-1,o);h=h.p}f=(h=h.o).z,v=!v}while(!h.v);o.lineEnd()}}}function K(n){if(t=n.length){for(var t,r,i=0,e=n[0];++i<t;)e.n=r=n[i],r.p=e,e=r;e.n=r=n[0],r.p=e}}function Q(n){return p(n[0])<=u?n[0]:m(n[0])*((p(n[0])+u)%c-u)}function U(n,t,f,s){return function(p){var h,d,E,S=t(p),m=Z(),_=t(m),M=!1,x={point:N,lineStart:$,lineEnd:P,polygonStart:function(){x.point=j,x.lineStart=z,x.lineEnd=R,d=[],h=[]},polygonEnd:function(){x.point=N,x.lineStart=$,x.lineEnd=P,d=i(d);var n=function(n,t){var i=Q(t),f=t[1],s=y(f),p=[y(i),-g(i),0],h=0,d=0,E=new r;1===s?f=a+e:-1===s&&(f=-a-e);for(var S=0,m=n.length;S<m;++S)if(M=(_=n[S]).length)for(var _,M,x=_[M-1],N=Q(x),b=x[1]/2+l,$=y(b),P=g(b),j=0;j<M;++j,N=R,$=T,P=L,x=z){var z=_[j],R=Q(z),q=z[1]/2+l,T=y(q),L=g(q),C=R-N,H=C>=0?1:-1,O=H*C,W=O>u,X=$*T;if(E.add(v(X*H*y(O),P*L+X*g(O))),h+=W?C+H*c:C,W^N>=i^R>=i){var Y=k(A(x),A(z));F(Y);var I=k(p,Y);F(I);var G=(W^C>=0?-1:1)*w(I[2]);(f>G||f===G&&(Y[0]||Y[1]))&&(d+=W^C>=0?1:-1)}}return(h<-e||h<e&&E<-o)^1&d}(h,s);d.length?(M||(p.polygonStart(),M=!0),J(d,nn,n,f,p)):n&&(M||(p.polygonStart(),M=!0),p.lineStart(),f(null,null,1,p),p.lineEnd()),M&&(p.polygonEnd(),M=!1),d=h=null},sphere:function(){p.polygonStart(),p.lineStart(),f(null,null,1,p),p.lineEnd(),p.polygonEnd()}};function N(t,r){n(t,r)&&p.point(t,r)}function b(n,t){S.point(n,t)}function $(){x.point=b,S.lineStart()}function P(){x.point=N,S.lineEnd()}function j(n,t){E.push([n,t]),_.point(n,t)}function z(){_.lineStart(),E=[]}function R(){j(E[0][0],E[0][1]),_.lineEnd();var n,t,r,i,e=_.clean(),o=m.result(),u=o.length;if(E.pop(),h.push(E),E=null,u)if(1&e){if((t=(r=o[0]).length-1)>0){for(M||(p.polygonStart(),M=!0),p.lineStart(),n=0;n<t;++n)p.point((i=r[n])[0],i[1]);p.lineEnd()}}else u>1&&2&e&&o.push(o.pop().concat(o.shift())),d.push(o.filter(V))}return x}}function V(n){return n.length>1}function nn(n,t){return((n=n.x)[0]<0?n[1]-a-e:a-n[1])-((t=t.x)[0]<0?t[1]-a-e:a-t[1])}O.invert=O;var tn=U((function(){return!0}),(function(n){var t,r=NaN,i=NaN,o=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(l,c){var f=l>0?u:-u,s=p(l-r);p(s-u)<e?(n.point(r,i=(i+c)/2>0?a:-a),n.point(o,i),n.lineEnd(),n.lineStart(),n.point(f,i),n.point(l,i),t=0):o!==f&&s>=u&&(p(r-o)<e&&(r-=o*e),p(l-f)<e&&(l-=f*e),i=function(n,t,r,i){var o,u,a=y(n-r);return p(a)>e?h((y(t)*(u=g(i))*y(r)-y(i)*(o=g(t))*y(n))/(o*u*a)):(t+i)/2}(r,i,l,c),n.point(o,i),n.lineEnd(),n.lineStart(),n.point(f,i),t=0),n.point(r=l,i=c),o=f},lineEnd:function(){n.lineEnd(),r=i=NaN},clean:function(){return 2-t}}}),(function(n,t,r,i){var o;if(null==n)o=r*a,i.point(-u,o),i.point(0,o),i.point(u,o),i.point(u,0),i.point(u,-o),i.point(0,-o),i.point(-u,-o),i.point(-u,0),i.point(-u,o);else if(p(n[0]-t[0])>e){var l=n[0]<t[0]?u:-u;o=r*l/2,i.point(-l,o),i.point(0,o),i.point(l,o)}else i.point(t[0],t[1])}),[-u,-a]);function rn(n){var t=g(n),r=6*s,i=t>0,o=p(t)>e;function a(n,r){return g(n)*g(r)>t}function l(n,r,i){var o=[1,0,0],a=k(A(n),A(r)),l=T(a,a),c=a[0],f=l-c*c;if(!f)return!i&&n;var s=t*l/f,h=-t*c/f,v=k(o,a),g=C(o,s);L(g,C(a,h));var d=v,E=T(g,d),S=T(d,d),y=E*E-S*(T(g,g)-1);if(!(y<0)){var m=_(y),M=C(d,(-E-m)/S);if(L(M,g),M=q(M),!i)return M;var x,w=n[0],N=r[0],b=n[1],$=r[1];N<w&&(x=w,w=N,N=x);var P=N-w,j=p(P-u)<e;if(!j&&$<b&&(x=b,b=$,$=x),j||P<e?j?b+$>0^M[1]<(p(M[0]-w)<e?b:$):b<=M[1]&&M[1]<=$:P>u^(w<=M[0]&&M[0]<=N)){var z=C(d,(-E+m)/S);return L(z,g),[M,q(z)]}}}function f(t,r){var e=i?n:u-n,o=0;return t<-e?o|=1:t>e&&(o|=2),r<-e?o|=4:r>e&&(o|=8),o}return U(a,(function(n){var t,r,e,c,s;return{lineStart:function(){c=e=!1,s=1},point:function(p,h){var v,g=[p,h],d=a(p,h),E=i?d?0:f(p,h):d?f(p+(p<0?u:-u),h):0;if(!t&&(c=e=d)&&n.lineStart(),d!==e&&(!(v=l(t,g))||B(t,v)||B(g,v))&&(g[2]=1),d!==e)s=0,d?(n.lineStart(),v=l(g,t),n.point(v[0],v[1])):(v=l(t,g),n.point(v[0],v[1],2),n.lineEnd()),t=v;else if(o&&t&&i^d){var S;E&r||!(S=l(g,t,!0))||(s=0,i?(n.lineStart(),n.point(S[0][0],S[0][1]),n.point(S[1][0],S[1][1]),n.lineEnd()):(n.point(S[1][0],S[1][1]),n.lineEnd(),n.lineStart(),n.point(S[0][0],S[0][1],3)))}!d||t&&B(t,g)||n.point(g[0],g[1]),t=g,e=d,r=E},lineEnd:function(){e&&n.lineEnd(),t=null},clean:function(){return s|(c&&e)<<1}}}),(function(t,i,e,o){!function(n,t,r,i,e,o){if(r){var u=g(t),a=y(t),l=i*r;null==e?(e=t+i*c,o=t-l/2):(e=G(u,e),o=G(u,o),(i>0?e<o:e>o)&&(e+=i*c));for(var f,s=e;i>0?s>o:s<o;s-=l)f=q([u,-a*g(s),-a*y(s)]),n.point(f[0],f[1])}}(o,n,r,e,t,i)}),i?[0,-n]:[-u,n-u])}var en=1e9,on=-en;function un(n,t,r,o){function u(i,e){return n<=i&&i<=r&&t<=e&&e<=o}function a(i,e,u,a){var c=0,s=0;if(null==i||(c=l(i,u))!==(s=l(e,u))||f(i,e)<0^u>0)do{a.point(0===c||3===c?n:r,c>1?o:t)}while((c=(c+u+4)%4)!==s);else a.point(e[0],e[1])}function l(i,o){return p(i[0]-n)<e?o>0?0:3:p(i[0]-r)<e?o>0?2:1:p(i[1]-t)<e?o>0?1:0:o>0?3:2}function c(n,t){return f(n.x,t.x)}function f(n,t){var r=l(n,1),i=l(t,1);return r!==i?r-i:0===r?t[1]-n[1]:1===r?n[0]-t[0]:2===r?n[1]-t[1]:t[0]-n[0]}return function(e){var l,f,s,p,h,v,g,d,E,S,y,m=e,_=Z(),M={point:x,lineStart:function(){M.point=w,f&&f.push(s=[]);S=!0,E=!1,g=d=NaN},lineEnd:function(){l&&(w(p,h),v&&E&&_.rejoin(),l.push(_.result()));M.point=x,E&&m.lineEnd()},polygonStart:function(){m=_,l=[],f=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,i=f.length;r<i;++r)for(var e,u,a=f[r],l=1,c=a.length,s=a[0],p=s[0],h=s[1];l<c;++l)e=p,u=h,p=(s=a[l])[0],h=s[1],u<=o?h>o&&(p-e)*(o-u)>(h-u)*(n-e)&&++t:h<=o&&(p-e)*(o-u)<(h-u)*(n-e)&&--t;return t}(),r=y&&t,u=(l=i(l)).length;(r||u)&&(e.polygonStart(),r&&(e.lineStart(),a(null,null,1,e),e.lineEnd()),u&&J(l,c,t,a,e),e.polygonEnd());m=e,l=f=s=null}};function x(n,t){u(n,t)&&m.point(n,t)}function w(i,e){var a=u(i,e);if(f&&s.push([i,e]),S)p=i,h=e,v=a,S=!1,a&&(m.lineStart(),m.point(i,e));else if(a&&E)m.point(i,e);else{var l=[g=Math.max(on,Math.min(en,g)),d=Math.max(on,Math.min(en,d))],c=[i=Math.max(on,Math.min(en,i)),e=Math.max(on,Math.min(en,e))];!function(n,t,r,i,e,o){var u,a=n[0],l=n[1],c=0,f=1,s=t[0]-a,p=t[1]-l;if(u=r-a,s||!(u>0)){if(u/=s,s<0){if(u<c)return;u<f&&(f=u)}else if(s>0){if(u>f)return;u>c&&(c=u)}if(u=e-a,s||!(u<0)){if(u/=s,s<0){if(u>f)return;u>c&&(c=u)}else if(s>0){if(u<c)return;u<f&&(f=u)}if(u=i-l,p||!(u>0)){if(u/=p,p<0){if(u<c)return;u<f&&(f=u)}else if(p>0){if(u>f)return;u>c&&(c=u)}if(u=o-l,p||!(u<0)){if(u/=p,p<0){if(u>f)return;u>c&&(c=u)}else if(p>0){if(u<c)return;u<f&&(f=u)}return c>0&&(n[0]=a+c*s,n[1]=l+c*p),f<1&&(t[0]=a+f*s,t[1]=l+f*p),!0}}}}}(l,c,n,t,r,o)?a&&(m.lineStart(),m.point(i,e),y=!1):(E||(m.lineStart(),m.point(l[0],l[1])),m.point(c[0],c[1]),a||m.lineEnd(),y=!1)}g=i,d=e,E=a}return M}}var an,ln,cn,fn,sn=n=>n,pn=new r,hn=new r,vn={point:N,lineStart:N,lineEnd:N,polygonStart:function(){vn.lineStart=gn,vn.lineEnd=Sn},polygonEnd:function(){vn.lineStart=vn.lineEnd=vn.point=N,pn.add(p(hn)),hn=new r},result:function(){var n=pn/2;return pn=new r,n}};function gn(){vn.point=dn}function dn(n,t){vn.point=En,an=cn=n,ln=fn=t}function En(n,t){hn.add(fn*n-cn*t),cn=n,fn=t}function Sn(){En(an,ln)}var yn=vn,mn=1/0,_n=mn,Mn=-mn,xn=Mn,wn={point:function(n,t){n<mn&&(mn=n);n>Mn&&(Mn=n);t<_n&&(_n=t);t>xn&&(xn=t)},lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N,result:function(){var n=[[mn,_n],[Mn,xn]];return Mn=xn=-(_n=mn=1/0),n}};var Nn,bn,$n,Pn,jn=wn,zn=0,Rn=0,qn=0,An=0,Tn=0,kn=0,Ln=0,Cn=0,Fn=0,Hn={point:On,lineStart:Wn,lineEnd:In,polygonStart:function(){Hn.lineStart=Gn,Hn.lineEnd=Zn},polygonEnd:function(){Hn.point=On,Hn.lineStart=Wn,Hn.lineEnd=In},result:function(){var n=Fn?[Ln/Fn,Cn/Fn]:kn?[An/kn,Tn/kn]:qn?[zn/qn,Rn/qn]:[NaN,NaN];return zn=Rn=qn=An=Tn=kn=Ln=Cn=Fn=0,n}};function On(n,t){zn+=n,Rn+=t,++qn}function Wn(){Hn.point=Xn}function Xn(n,t){Hn.point=Yn,On($n=n,Pn=t)}function Yn(n,t){var r=n-$n,i=t-Pn,e=_(r*r+i*i);An+=e*($n+n)/2,Tn+=e*(Pn+t)/2,kn+=e,On($n=n,Pn=t)}function In(){Hn.point=On}function Gn(){Hn.point=Bn}function Zn(){Dn(Nn,bn)}function Bn(n,t){Hn.point=Dn,On(Nn=$n=n,bn=Pn=t)}function Dn(n,t){var r=n-$n,i=t-Pn,e=_(r*r+i*i);An+=e*($n+n)/2,Tn+=e*(Pn+t)/2,kn+=e,Ln+=(e=Pn*n-$n*t)*($n+n),Cn+=e*(Pn+t),Fn+=3*e,On($n=n,Pn=t)}var Jn=Hn;function Kn(n){this._context=n}Kn.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,c)}},result:N};var Qn,Un,Vn,nt,tt,rt=new r,it={point:N,lineStart:function(){it.point=et},lineEnd:function(){Qn&&ot(Un,Vn),it.point=N},polygonStart:function(){Qn=!0},polygonEnd:function(){Qn=null},result:function(){var n=+rt;return rt=new r,n}};function et(n,t){it.point=ot,Un=nt=n,Vn=tt=t}function ot(n,t){nt-=n,tt-=t,rt.add(_(nt*nt+tt*tt)),nt=n,tt=t}var ut=it;let at,lt,ct,ft;class st{constructor(n){this._append=null==n?pt:function(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return pt;if(t!==at){const n=10**t;at=t,lt=function(t){let r=1;this._+=t[0];for(const i=t.length;r<i;++r)this._+=Math.round(arguments[r]*n)/n+t[r]}}return lt}(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(n,t){switch(this._point){case 0:this._append`M${n},${t}`,this._point=1;break;case 1:this._append`L${n},${t}`;break;default:if(this._append`M${n},${t}`,this._radius!==ct||this._append!==lt){const n=this._radius,t=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,ct=n,lt=this._append,ft=this._,this._=t}this._+=ft}}result(){const n=this._;return this._="",n.length?n:null}}function pt(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function ht(n,t){let r,i,e=3,o=4.5;function u(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),R(n,r(i))),i.result()}return u.area=function(n){return R(n,r(yn)),yn.result()},u.measure=function(n){return R(n,r(ut)),ut.result()},u.bounds=function(n){return R(n,r(jn)),jn.result()},u.centroid=function(n){return R(n,r(Jn)),Jn.result()},u.projection=function(t){return arguments.length?(r=null==t?(n=null,sn):(n=t).stream,u):n},u.context=function(n){return arguments.length?(i=null==n?(t=null,new st(e)):new Kn(t=n),"function"!=typeof o&&i.pointRadius(o),u):t},u.pointRadius=function(n){return arguments.length?(o="function"==typeof n?n:(i.pointRadius(+n),+n),u):o},u.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return null===t&&(i=new st(e)),u},u.projection(n).digits(e).context(t)}function vt(n){return function(t){var r=new gt;for(var i in n)r[i]=n[i];return r.stream=t,r}}function gt(){}function dt(n,t,r){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),R(r,n.stream(jn)),t(jn.result()),null!=i&&n.clipExtent(i),n}function Et(n,t,r){return dt(n,(function(r){var i=t[1][0]-t[0][0],e=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),e/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,a=+t[0][1]+(e-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([u,a])}),r)}function St(n,t,r){return Et(n,[[0,0],t],r)}function yt(n,t,r){return dt(n,(function(r){var i=+t,e=i/(r[1][0]-r[0][0]),o=(i-e*(r[1][0]+r[0][0]))/2,u=-e*r[0][1];n.scale(150*e).translate([o,u])}),r)}function mt(n,t,r){return dt(n,(function(r){var i=+t,e=i/(r[1][1]-r[0][1]),o=-e*r[0][0],u=(i-e*(r[1][1]+r[0][1]))/2;n.scale(150*e).translate([o,u])}),r)}gt.prototype={constructor:gt,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var _t=16,Mt=g(30*s);function xt(n,t){return+t?function(n,t){function r(i,o,u,a,l,c,f,s,h,g,d,E,S,y){var m=f-i,M=s-o,x=m*m+M*M;if(x>4*t&&S--){var N=a+g,b=l+d,$=c+E,P=_(N*N+b*b+$*$),j=w($/=P),z=p(p($)-1)<e||p(u-h)<e?(u+h)/2:v(b,N),R=n(z,j),q=R[0],A=R[1],T=q-i,k=A-o,L=M*T-m*k;(L*L/x>t||p((m*T+M*k)/x-.5)>.3||a*g+l*d+c*E<Mt)&&(r(i,o,u,a,l,c,q,A,z,N/=P,b/=P,$,S,y),y.point(q,A),r(q,A,z,N,b,$,f,s,h,g,d,E,S,y))}}return function(t){var i,e,o,u,a,l,c,f,s,p,h,v,g={point:d,lineStart:E,lineEnd:y,polygonStart:function(){t.polygonStart(),g.lineStart=m},polygonEnd:function(){t.polygonEnd(),g.lineStart=E}};function d(r,i){r=n(r,i),t.point(r[0],r[1])}function E(){f=NaN,g.point=S,t.lineStart()}function S(i,e){var o=A([i,e]),u=n(i,e);r(f,s,c,p,h,v,f=u[0],s=u[1],c=i,p=o[0],h=o[1],v=o[2],_t,t),t.point(f,s)}function y(){g.point=d,t.lineEnd()}function m(){E(),g.point=_,g.lineEnd=M}function _(n,t){S(i=n,t),e=f,o=s,u=p,a=h,l=v,g.point=S}function M(){r(f,s,c,p,h,v,e,o,i,u,a,l,_t,t),g.lineEnd=y,y()}return g}}(n,t):function(n){return vt({point:function(t,r){t=n(t,r),this.stream.point(t[0],t[1])}})}(n)}var wt=vt({point:function(n,t){this.stream.point(n*s,t*s)}});function Nt(n,t,r,i,e,o){if(!o)return function(n,t,r,i,e){function o(o,u){return[t+n*(o*=i),r-n*(u*=e)]}return o.invert=function(o,u){return[(o-t)/n*i,(r-u)/n*e]},o}(n,t,r,i,e);var u=g(o),a=y(o),l=u*n,c=a*n,f=u/n,s=a/n,p=(a*r-u*t)/n,h=(a*t+u*r)/n;function v(n,o){return[l*(n*=i)-c*(o*=e)+t,r-c*n-l*o]}return v.invert=function(n,t){return[i*(f*n-s*t+p),e*(h-s*n-f*t)]},v}function bt(n){return $t((function(){return n}))()}function $t(n){var t,r,i,e,o,u,a,l,c,p,h=150,v=480,g=250,d=0,E=0,S=0,y=0,m=0,M=0,x=1,w=1,N=null,b=tn,$=null,P=sn,j=.5;function z(n){return l(n[0]*s,n[1]*s)}function R(n){return(n=l.invert(n[0],n[1]))&&[n[0]*f,n[1]*f]}function q(){var n=Nt(h,0,0,x,w,M).apply(null,t(d,E)),i=Nt(h,v-n[0],g-n[1],x,w,M);return r=W(S,y,m),a=H(t,i),l=H(r,a),u=xt(a,j),A()}function A(){return c=p=null,z}return z.stream=function(n){return c&&p===n?c:c=wt(function(n){return vt({point:function(t,r){var i=n(t,r);return this.stream.point(i[0],i[1])}})}(r)(b(u(P(p=n)))))},z.preclip=function(n){return arguments.length?(b=n,N=void 0,A()):b},z.postclip=function(n){return arguments.length?(P=n,$=i=e=o=null,A()):P},z.clipAngle=function(n){return arguments.length?(b=+n?rn(N=n*s):(N=null,tn),A()):N*f},z.clipExtent=function(n){return arguments.length?(P=null==n?($=i=e=o=null,sn):un($=+n[0][0],i=+n[0][1],e=+n[1][0],o=+n[1][1]),A()):null==$?null:[[$,i],[e,o]]},z.scale=function(n){return arguments.length?(h=+n,q()):h},z.translate=function(n){return arguments.length?(v=+n[0],g=+n[1],q()):[v,g]},z.center=function(n){return arguments.length?(d=n[0]%360*s,E=n[1]%360*s,q()):[d*f,E*f]},z.rotate=function(n){return arguments.length?(S=n[0]%360*s,y=n[1]%360*s,m=n.length>2?n[2]%360*s:0,q()):[S*f,y*f,m*f]},z.angle=function(n){return arguments.length?(M=n%360*s,q()):M*f},z.reflectX=function(n){return arguments.length?(x=n?-1:1,q()):x<0},z.reflectY=function(n){return arguments.length?(w=n?-1:1,q()):w<0},z.precision=function(n){return arguments.length?(u=xt(a,j=n*n),A()):_(j)},z.fitExtent=function(n,t){return Et(z,n,t)},z.fitSize=function(n,t){return St(z,n,t)},z.fitWidth=function(n,t){return yt(z,n,t)},z.fitHeight=function(n,t){return mt(z,n,t)},function(){return t=n.apply(this,arguments),z.invert=t.invert&&R,q()}}function Pt(n){var t=0,r=u/3,i=$t(n),e=i(t,r);return e.parallels=function(n){return arguments.length?i(t=n[0]*s,r=n[1]*s):[t*f,r*f]},e}function jt(n,t){var r=y(n),i=(r+y(t))/2;if(p(i)<e)return function(n){var t=g(n);function r(n,r){return[n*t,y(r)/t]}return r.invert=function(n,r){return[n/t,w(r*t)]},r}(n);var o=1+r*(2*i-r),a=_(o)/i;function l(n,t){var r=_(o-2*i*y(t))/i;return[r*y(n*=i),a-r*g(n)]}return l.invert=function(n,t){var r=a-t,e=v(n,p(r))*m(r);return r*i<0&&(e-=u*m(n)*m(r)),[e/i,w((o-(n*n+r*r)*i*i)/(2*i))]},l}function zt(){return Pt(jt).scale(155.424).center([0,33.6442])}function Rt(){return zt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function qt(n){return function(t,r){var i=g(t),e=g(r),o=n(i*e);return o===1/0?[2,0]:[o*e*y(t),o*y(r)]}}function At(n){return function(t,r){var i=_(t*t+r*r),e=n(i),o=y(e),u=g(e);return[v(t*o,i*u),w(i&&r*o/i)]}}var Tt=qt((function(n){return _(2/(1+n))}));Tt.invert=At((function(n){return 2*w(n/2)}));var kt=qt((function(n){return(n=x(n))&&n/y(n)}));function Lt(n,t){return[n,E(M((a+t)/2))]}function Ct(n){var t,r,i,e=bt(n),o=e.center,a=e.scale,l=e.translate,c=e.clipExtent,p=null;function h(){var o=u*a(),l=e(function(n){function t(t){return(t=n(t[0]*s,t[1]*s))[0]*=f,t[1]*=f,t}return n=W(n[0]*s,n[1]*s,n.length>2?n[2]*s:0),t.invert=function(t){return(t=n.invert(t[0]*s,t[1]*s))[0]*=f,t[1]*=f,t},t}(e.rotate()).invert([0,0]));return c(null==p?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:n===Lt?[[Math.max(l[0]-o,p),t],[Math.min(l[0]+o,r),i]]:[[p,Math.max(l[1]-o,t)],[r,Math.min(l[1]+o,i)]])}return e.scale=function(n){return arguments.length?(a(n),h()):a()},e.translate=function(n){return arguments.length?(l(n),h()):l()},e.center=function(n){return arguments.length?(o(n),h()):o()},e.clipExtent=function(n){return arguments.length?(null==n?p=t=r=i=null:(p=+n[0][0],t=+n[0][1],r=+n[1][0],i=+n[1][1]),h()):null==p?null:[[p,t],[r,i]]},h()}function Ft(n){return M((a+n)/2)}function Ht(n,t){var r=g(n),i=n===t?y(n):E(r/g(t))/E(Ft(t)/Ft(n)),o=r*S(Ft(n),i)/i;if(!i)return Lt;function l(n,t){o>0?t<-a+e&&(t=-a+e):t>a-e&&(t=a-e);var r=o/S(Ft(t),i);return[r*y(i*n),o-r*g(i*n)]}return l.invert=function(n,t){var r=o-t,e=m(i)*_(n*n+r*r),l=v(n,p(r))*m(r);return r*i<0&&(l-=u*m(n)*m(r)),[l/i,2*h(S(o/e,1/i))-a]},l}function Ot(n,t){return[n,t]}function Wt(n,t){var r=g(n),i=n===t?y(n):(r-g(t))/(t-n),o=r/i+n;if(p(i)<e)return Ot;function a(n,t){var r=o-t,e=i*n;return[r*y(e),o-r*g(e)]}return a.invert=function(n,t){var r=o-t,e=v(n,p(r))*m(r);return r*i<0&&(e-=u*m(n)*m(r)),[e/i,o-m(i)*_(n*n+r*r)]},a}kt.invert=At((function(n){return n})),Lt.invert=function(n,t){return[n,2*h(d(t))-a]},Ot.invert=Ot;var Xt=1.340264,Yt=-.081106,It=893e-6,Gt=.003796,Zt=_(3)/2;function Bt(n,t){var r=w(Zt*y(t)),i=r*r,e=i*i*i;return[n*g(r)/(Zt*(Xt+3*Yt*i+e*(7*It+9*Gt*i))),r*(Xt+Yt*i+e*(It+Gt*i))]}function Dt(n,t){var r=g(t),i=g(n)*r;return[r*y(n)/i,y(t)/i]}function Jt(n,t){var r=t*t,i=r*r;return[n*(.8707-.131979*r+i*(i*(.003971*r-.001529*i)-.013791)),t*(1.007226+r*(.015085+i*(.028874*r-.044475-.005916*i)))]}function Kt(n,t){return[g(t)*y(n),y(t)]}function Qt(n,t){var r=g(t),i=1+g(n)*r;return[r*y(n)/i,y(t)/i]}function Ut(n,t){return[E(M((a+t)/2)),-n]}Bt.invert=function(n,t){for(var r,i=t,e=i*i,u=e*e*e,a=0;a<12&&(u=(e=(i-=r=(i*(Xt+Yt*e+u*(It+Gt*e))-t)/(Xt+3*Yt*e+u*(7*It+9*Gt*e)))*i)*e*e,!(p(r)<o));++a);return[Zt*n*(Xt+3*Yt*e+u*(7*It+9*Gt*e))/g(i),w(y(i)/Zt)]},Dt.invert=At(h),Jt.invert=function(n,t){var r,i=t,o=25;do{var u=i*i,a=u*u;i-=r=(i*(1.007226+u*(.015085+a*(.028874*u-.044475-.005916*a)))-t)/(1.007226+u*(.045255+a*(.259866*u-.311325-.005916*11*a)))}while(p(r)>e&&--o>0);return[n/(.8707+(u=i*i)*(u*(u*u*u*(.003971-.001529*u)-.013791)-.131979)),i]},Kt.invert=At(w),Qt.invert=At((function(n){return 2*h(n)})),Ut.invert=function(n,t){return[-t,2*h(d(n))-a]};var Vt,nr=Math.abs,tr=Math.cos,rr=Math.sin,ir=1e-6,er=Math.PI,or=er/2,ur=(Vt=2)>0?Math.sqrt(Vt):0;function ar(n){return n>1?or:n<-1?-or:Math.asin(n)}function lr(n,t){var r,i=n*rr(t),e=30;do{t-=r=(t+rr(t)-i)/(1+tr(t))}while(nr(r)>ir&&--e>0);return t/2}var cr=function(n,t,r){function i(i,e){return[n*i*tr(e=lr(r,e)),t*rr(e)]}return i.invert=function(i,e){return e=ar(e/t),[i/(n*tr(e)),ar((2*e+rr(2*e))/r)]},i}(ur/or,ur,er);const fr=ht(),sr=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function pr(n,r){if(!n||"string"!=typeof n)throw new Error("Projection type must be a name string.");return n=n.toLowerCase(),arguments.length>1?(hr[n]=function(n,r){return function i(){const e=r();return e.type=n,e.path=ht().projection(e),e.copy=e.copy||function(){const n=i();return sr.forEach((t=>{e[t]&&n[t](e[t]())})),n.path.pointRadius(e.path.pointRadius()),n},t.registerScale(e)}}(n,r),this):hr[n]||null}const hr={albers:Rt,albersusa:function(){var n,t,r,i,o,u,a=Rt(),l=zt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=zt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(n,t){u=[n,t]}};function s(n){var t=n[0],e=n[1];return u=null,r.point(t,e),u||(i.point(t,e),u)||(o.point(t,e),u)}function p(){return n=t=null,s}return s.invert=function(n){var t=a.scale(),r=a.translate(),i=(n[0]-r[0])/t,e=(n[1]-r[1])/t;return(e>=.12&&e<.234&&i>=-.425&&i<-.214?l:e>=.166&&e<.234&&i>=-.214&&i<-.115?c:a).invert(n)},s.stream=function(r){return n&&t===r?n:(i=[a.stream(t=r),l.stream(r),c.stream(r)],e=i.length,n={point:function(n,t){for(var r=-1;++r<e;)i[r].point(n,t)},sphere:function(){for(var n=-1;++n<e;)i[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)i[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)i[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)i[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)i[n].polygonEnd()}});var i,e},s.precision=function(n){return arguments.length?(a.precision(n),l.precision(n),c.precision(n),p()):a.precision()},s.scale=function(n){return arguments.length?(a.scale(n),l.scale(.35*n),c.scale(n),s.translate(a.translate())):a.scale()},s.translate=function(n){if(!arguments.length)return a.translate();var t=a.scale(),u=+n[0],s=+n[1];return r=a.translate(n).clipExtent([[u-.455*t,s-.238*t],[u+.455*t,s+.238*t]]).stream(f),i=l.translate([u-.307*t,s+.201*t]).clipExtent([[u-.425*t+e,s+.12*t+e],[u-.214*t-e,s+.234*t-e]]).stream(f),o=c.translate([u-.205*t,s+.212*t]).clipExtent([[u-.214*t+e,s+.166*t+e],[u-.115*t-e,s+.234*t-e]]).stream(f),p()},s.fitExtent=function(n,t){return Et(s,n,t)},s.fitSize=function(n,t){return St(s,n,t)},s.fitWidth=function(n,t){return yt(s,n,t)},s.fitHeight=function(n,t){return mt(s,n,t)},s.scale(1070)},azimuthalequalarea:function(){return bt(Tt).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return bt(kt).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return Pt(Ht).scale(109.5).parallels([30,30])},conicequalarea:zt,conicequidistant:function(){return Pt(Wt).scale(131.154).center([0,13.9389])},equalEarth:function(){return bt(Bt).scale(177.158)},equirectangular:function(){return bt(Ot).scale(152.63)},gnomonic:function(){return bt(Dt).scale(144.049).clipAngle(60)},identity:function(){var n,t,r,i,e,o,u,a=1,l=0,c=0,p=1,h=1,v=0,d=null,E=1,S=1,m=vt({point:function(n,t){var r=x([n,t]);this.stream.point(r[0],r[1])}}),_=sn;function M(){return E=a*p,S=a*h,o=u=null,x}function x(r){var i=r[0]*E,e=r[1]*S;if(v){var o=e*n-i*t;i=i*n+e*t,e=o}return[i+l,e+c]}return x.invert=function(r){var i=r[0]-l,e=r[1]-c;if(v){var o=e*n+i*t;i=i*n-e*t,e=o}return[i/E,e/S]},x.stream=function(n){return o&&u===n?o:o=m(_(u=n))},x.postclip=function(n){return arguments.length?(_=n,d=r=i=e=null,M()):_},x.clipExtent=function(n){return arguments.length?(_=null==n?(d=r=i=e=null,sn):un(d=+n[0][0],r=+n[0][1],i=+n[1][0],e=+n[1][1]),M()):null==d?null:[[d,r],[i,e]]},x.scale=function(n){return arguments.length?(a=+n,M()):a},x.translate=function(n){return arguments.length?(l=+n[0],c=+n[1],M()):[l,c]},x.angle=function(r){return arguments.length?(t=y(v=r%360*s),n=g(v),M()):v*f},x.reflectX=function(n){return arguments.length?(p=n?-1:1,M()):p<0},x.reflectY=function(n){return arguments.length?(h=n?-1:1,M()):h<0},x.fitExtent=function(n,t){return Et(x,n,t)},x.fitSize=function(n,t){return St(x,n,t)},x.fitWidth=function(n,t){return yt(x,n,t)},x.fitHeight=function(n,t){return mt(x,n,t)},x},mercator:function(){return Ct(Lt).scale(961/c)},mollweide:function(){return bt(cr).scale(169.529)},naturalEarth1:function(){return bt(Jt).scale(175.295)},orthographic:function(){return bt(Kt).scale(249.5).clipAngle(90+e)},stereographic:function(){return bt(Qt).scale(250).clipAngle(142)},transversemercator:function(){var n=Ct(Ut),t=n.center,r=n.rotate;return n.center=function(n){return arguments.length?t([-n[1],n[0]]):[(n=t())[1],-n[0]]},n.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):[(n=r())[0],n[1],n[2]-90]},r([0,0,90]).scale(159.155)}};for(const n in hr)pr(n,hr[n]);n.getProjectionPath=function(n){return n&&n.path||fr},n.projection=pr,n.projectionProperties=sr}));
//# sourceMappingURL=vega-projection.min.js.map
